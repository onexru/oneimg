import{_ as S,r as g,y as k,k as y,o as V,c as f,b as p,e,d as M,i as n,s as o,q as a,u as R,g as U,t as N,h,x as E}from"./index-BcmoEdYw.js";const L={class:"navbar"},q={class:"navbar-content"},z={class:"navbar-brand"},D={class:"nav-links desktop-nav"},J={class:"navbar-actions"},P={class:"theme-toggle-wrapper"},j=["title"],A={class:"theme-icon"},F={class:"user-menu"},G={class:"username"},H={key:0,class:"dropdown-menu"},K={class:"mobile-nav-links"},Q={__name:"NavBar",setup(W){const d=E(),b=g(""),r=g(!1),u=g(!1),c=g(k.getCurrentTheme()),w=y(()=>c.value==="dark"?"☀️":"🌙"),_=y(()=>c.value==="dark"?"切换到浅色主题":"切换到深色主题"),T=()=>{const l=localStorage.getItem("userInfo");if(l)try{const s=JSON.parse(l);b.value=s.username}catch(s){console.error("解析用户信息失败:",s)}},$=()=>{r.value=!r.value},I=()=>{k.toggle(),c.value=k.getCurrentTheme()},x=()=>{u.value=!u.value,r.value=!1},C=()=>{u.value=!1},m=l=>{v(l),C()},v=l=>{console.log("导航点击:",l),console.log("当前路由:",d.currentRoute.value.path),r.value=!1,d.currentRoute.value.path!==l&&d.push(l).then(()=>{console.log("导航成功:",l)}).catch(s=>{console.error("导航失败:",s)})},B=async()=>{try{await fetch("/api/logout",{method:"POST"})}catch(l){console.error("退出登录失败:",l)}finally{d.push("/login")}},O=l=>{l.target.closest(".user-menu")||(r.value=!1),!l.target.closest(".navbar-actions")&&!l.target.closest(".mobile-nav")&&(u.value=!1)};return V(()=>{T(),document.addEventListener("click",O),k.onThemeChange(l=>{c.value=l})}),(l,s)=>{const t=R("router-link");return p(),f("nav",L,[e("div",q,[e("div",z,[n(t,{to:"/",class:"brand-link"},{default:o(()=>[...s[9]||(s[9]=[a(" OneImg ",-1)])]),_:1})]),e("ul",D,[e("li",null,[n(t,{to:"/",class:"nav-link",onClick:s[0]||(s[0]=i=>v("/"))},{default:o(()=>[...s[10]||(s[10]=[a("首页",-1)])]),_:1})]),e("li",null,[n(t,{to:"/gallery",class:"nav-link",onClick:s[1]||(s[1]=i=>v("/gallery"))},{default:o(()=>[...s[11]||(s[11]=[a("画廊",-1)])]),_:1})]),e("li",null,[n(t,{to:"/stats",class:"nav-link",onClick:s[2]||(s[2]=i=>v("/stats"))},{default:o(()=>[...s[12]||(s[12]=[a("统计",-1)])]),_:1})]),e("li",null,[n(t,{to:"/settings",class:"nav-link",onClick:s[3]||(s[3]=i=>v("/settings"))},{default:o(()=>[...s[13]||(s[13]=[a("设置",-1)])]),_:1})])]),e("div",J,[e("button",{onClick:x,class:"mobile-menu-btn"},[e("span",{class:U(["hamburger",{active:u.value}])},[...s[14]||(s[14]=[e("span",null,null,-1),e("span",null,null,-1),e("span",null,null,-1)])],2)]),e("div",P,[e("button",{onClick:I,class:"theme-toggle",title:_.value},[e("span",A,N(w.value),1)],8,j)]),e("div",F,[e("div",{class:"user-info",onClick:$},[e("span",G,N(b.value||"用户"),1),s[15]||(s[15]=e("span",{class:"dropdown-arrow"},"▼",-1))]),r.value?(p(),f("div",H,[e("button",{onClick:B,class:"logout-btn"},"退出登录")])):M("",!0)])])]),u.value?(p(),f("div",{key:0,class:"mobile-nav",onClick:C},[e("div",{class:"mobile-nav-content",onClick:s[8]||(s[8]=h(()=>{},["stop"]))},[e("ul",K,[e("li",null,[n(t,{to:"/",class:"mobile-nav-link",onClick:s[4]||(s[4]=i=>m("/"))},{default:o(()=>[...s[16]||(s[16]=[a("首页",-1)])]),_:1})]),e("li",null,[n(t,{to:"/gallery",class:"mobile-nav-link",onClick:s[5]||(s[5]=i=>m("/gallery"))},{default:o(()=>[...s[17]||(s[17]=[a("画廊",-1)])]),_:1})]),e("li",null,[n(t,{to:"/stats",class:"mobile-nav-link",onClick:s[6]||(s[6]=i=>m("/stats"))},{default:o(()=>[...s[18]||(s[18]=[a("统计",-1)])]),_:1})]),e("li",null,[n(t,{to:"/settings",class:"mobile-nav-link",onClick:s[7]||(s[7]=i=>m("/settings"))},{default:o(()=>[...s[19]||(s[19]=[a("设置",-1)])]),_:1})])])])])):M("",!0)])}}},Y=S(Q,[["__scopeId","data-v-60d470e7"]]);export{Y as N};
